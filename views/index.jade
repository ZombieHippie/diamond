extends layout

block head
  style.
    .container { max-width: 750px }
    .mono { font-family: "Courier New" }

block content
  .container
    .page-header.text-center
      h1 n
      //pre #! hacking/modding/inventing
      each page, index in views
        - page = page.slice(0,-5)
        if index !== 0
          span &nbsp; - &nbsp;
        a(href=page)=page
    style.
      .gh-code {
        font-family: monospace;
        background: #f7f7f7;
        margin: 10px;
        padding:16px;
        overflow: auto;
        white-space: pre;
      }
      .modal{overflow-y: auto;}
    #demo
    .modal.fade#demo-fileview
      .modal-dialog
        .modal-content
          .modal-header
            h4.modal-title
          .modal-body.gh-code
block footer
  script.
    log("Welcome to the index")
  script(src="/diamond/diamond.js")
  script.
    demo = new Diamond("#demo")
    demoModal = $("#demo-fileview")
    demoModal.modal({show:false})
    demo.onOpenFile = function (path, data) {
      console.log("opened file: ", path)
      console.log("file contents: ", data)
      demoModal.find(".modal-title").text(path)
      demoModal.find(".modal-body").text(data)
      demoModal.modal('show')
    }